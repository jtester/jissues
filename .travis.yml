language: php

php:
  - 5.3
  - 5.4

before_script:
  - composer update --dev
  - pyrus channel-discover pear.phpunit.de
  - pyrus install --force phpunit/DbUnit
  - pyrus install pear/PHP_CodeSniffer
  - pear channel-discover pear.phpmd.org
  - pear channel-discover pear.pdepend.org
  - pear install phpmd/PHP_PMD
  - phpenv rehash

script:
  - phpunit --configuration phpunit.travis.xml
  - phpcs -p --standard=build/phpcs/Joomla --report=checkstyle --report-file=build/checkstyle.txt --ignore="/*tmpl/*" src cli
  - ant -v
  - cat build/checkstyle.txt
